<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" id="Definitions_0a8virv" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="4.4.0">
  <bpmn:process id="BF2_REGISTRATION" isExecutable="true">
    <bpmn:startEvent id="StartEvent_BF2_CREATION">
      <bpmn:outgoing>Flow_1lciqyx</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:endEvent id="EndEvent_BF2_Registration">
      <bpmn:incoming>Flow_0pvemz3</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_1lciqyx" sourceRef="StartEvent_BF2_CREATION" targetRef="Validate_Correspondents" />
    <bpmn:userTask id="Validate_Correspondents" name="Validate Correspondents" camunda:formKey="COMP_REGISTRATION_CORRESPONDENTS">
      <bpmn:incoming>Flow_1lciqyx</bpmn:incoming>
      <bpmn:incoming>Flow_14xdkqw</bpmn:incoming>
      <bpmn:incoming>Flow_1y5510t</bpmn:incoming>
      <bpmn:outgoing>Flow_148os3u</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="Flow_148os3u" sourceRef="Validate_Correspondents" targetRef="Gateway_0gr2qu7" />
    <bpmn:exclusiveGateway id="Gateway_0gr2qu7">
      <bpmn:incoming>Flow_148os3u</bpmn:incoming>
      <bpmn:outgoing>Flow_1cs5smc</bpmn:outgoing>
      <bpmn:outgoing>Flow_14xdkqw</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_1cs5smc" sourceRef="Gateway_0gr2qu7" targetRef="Activity_11asbfs">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${valid == true}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:serviceTask id="Activity_11asbfs" name="Save Primary Correspondent" camunda:expression="${bpmnService.updatePrimaryCorrespondent(execution.getVariable(&#34;CaseUUID&#34;),execution.processBusinessKey, execution.getVariable(&#34;Correspondents&#34;))}">
      <bpmn:incoming>Flow_1cs5smc</bpmn:incoming>
      <bpmn:outgoing>Flow_0y1qmel</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_0y1qmel" sourceRef="Activity_11asbfs" targetRef="Validate_Complainant" />
    <bpmn:sequenceFlow id="Flow_14xdkqw" sourceRef="Gateway_0gr2qu7" targetRef="Validate_Correspondents">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${valid == false}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:userTask id="Validate_Complaint_Input" name="Complaint Input" camunda:formKey="BF2_REGISTRATION_INPUT">
      <bpmn:incoming>Flow_1pqozd2</bpmn:incoming>
      <bpmn:incoming>Flow_1cb1797</bpmn:incoming>
      <bpmn:outgoing>Flow_0s8laau</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="Flow_0s8laau" sourceRef="Validate_Complaint_Input" targetRef="Gateway_0768y0k" />
    <bpmn:exclusiveGateway id="Gateway_0768y0k">
      <bpmn:incoming>Flow_0s8laau</bpmn:incoming>
      <bpmn:outgoing>Flow_1pqozd2</bpmn:outgoing>
      <bpmn:outgoing>Flow_1lx955d</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_1pqozd2" sourceRef="Gateway_0768y0k" targetRef="Validate_Complaint_Input">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${valid == false}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:serviceTask id="Activity_1la7zrl" name="Update Team for Triage" camunda:expression="${bpmnService.updateTeamByStageAndTexts(execution.getVariable(&#34;CaseUUID&#34;),execution.processBusinessKey,&#34;BF2_TRIAGE&#34;,&#34;QueueTeamUUID&#34;,&#34;QueueTeamName&#34;,&#34;Stage&#34;)}">
      <bpmn:incoming>Flow_19k4zu9</bpmn:incoming>
      <bpmn:outgoing>Flow_0pvemz3</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_0pvemz3" sourceRef="Activity_1la7zrl" targetRef="EndEvent_BF2_Registration" />
    <bpmn:userTask id="Validate_Complainant" name="Validate Complainant" camunda:formKey="COMP_REGISTRATION_COMPLAINANT">
      <bpmn:incoming>Flow_0y1qmel</bpmn:incoming>
      <bpmn:outgoing>Flow_1nky866</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="Flow_1nky866" sourceRef="Validate_Complainant" targetRef="Gateway_1cb1epx" />
    <bpmn:exclusiveGateway id="Gateway_1cb1epx" default="Flow_1cb1797">
      <bpmn:incoming>Flow_1nky866</bpmn:incoming>
      <bpmn:outgoing>Flow_1y5510t</bpmn:outgoing>
      <bpmn:outgoing>Flow_1cb1797</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_1y5510t" sourceRef="Gateway_1cb1epx" targetRef="Validate_Correspondents">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${DIRECTION == "BACKWARD"}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:serviceTask id="Activity_0tgpbnx" name="Set Stage to Stage2" camunda:expression="${bpmnService.updateValue(execution.getVariable(&#34;CaseUUID&#34;), execution.processBusinessKey, &#34;Stage&#34;, &#34;Stage2&#34;)}">
      <bpmn:incoming>Flow_1lx955d</bpmn:incoming>
      <bpmn:outgoing>Flow_19k4zu9</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_19k4zu9" sourceRef="Activity_0tgpbnx" targetRef="Activity_1la7zrl" />
    <bpmn:sequenceFlow id="Flow_1cb1797" sourceRef="Gateway_1cb1epx" targetRef="Validate_Complaint_Input" />
    <bpmn:sequenceFlow id="Flow_1lx955d" sourceRef="Gateway_0768y0k" targetRef="Activity_0tgpbnx">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${valid == true}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="BF2_REGISTRATION">
      <bpmndi:BPMNEdge id="Flow_1y5510t_di" bpmnElement="Flow_1y5510t">
        <di:waypoint x="920" y="214" />
        <di:waypoint x="920" y="260" />
        <di:waypoint x="360" y="260" />
        <di:waypoint x="360" y="229" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1nky866_di" bpmnElement="Flow_1nky866">
        <di:waypoint x="850" y="189" />
        <di:waypoint x="895" y="189" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_14xdkqw_di" bpmnElement="Flow_14xdkqw">
        <di:waypoint x="500" y="164" />
        <di:waypoint x="500" y="100" />
        <di:waypoint x="360" y="100" />
        <di:waypoint x="360" y="149" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0y1qmel_di" bpmnElement="Flow_0y1qmel">
        <di:waypoint x="680" y="189" />
        <di:waypoint x="750" y="189" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1cs5smc_di" bpmnElement="Flow_1cs5smc">
        <di:waypoint x="525" y="189" />
        <di:waypoint x="580" y="189" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_148os3u_di" bpmnElement="Flow_148os3u">
        <di:waypoint x="410" y="189" />
        <di:waypoint x="475" y="189" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1lciqyx_di" bpmnElement="Flow_1lciqyx">
        <di:waypoint x="188" y="189" />
        <di:waypoint x="310" y="189" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1cb1797_di" bpmnElement="Flow_1cb1797">
        <di:waypoint x="945" y="189" />
        <di:waypoint x="1010" y="189" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1pqozd2_di" bpmnElement="Flow_1pqozd2">
        <di:waypoint x="1310" y="164" />
        <di:waypoint x="1310" y="100" />
        <di:waypoint x="1060" y="100" />
        <di:waypoint x="1060" y="149" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0s8laau_di" bpmnElement="Flow_0s8laau">
        <di:waypoint x="1110" y="189" />
        <di:waypoint x="1285" y="189" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1lx955d_di" bpmnElement="Flow_1lx955d">
        <di:waypoint x="1335" y="189" />
        <di:waypoint x="1440" y="189" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_19k4zu9_di" bpmnElement="Flow_19k4zu9">
        <di:waypoint x="1540" y="189" />
        <di:waypoint x="1590" y="189" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0pvemz3_di" bpmnElement="Flow_0pvemz3">
        <di:waypoint x="1690" y="189" />
        <di:waypoint x="1742" y="189" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_BF2_CREATION">
        <dc:Bounds x="152" y="171" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0g03uqt_di" bpmnElement="Validate_Correspondents">
        <dc:Bounds x="310" y="149" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0gr2qu7_di" bpmnElement="Gateway_0gr2qu7" isMarkerVisible="true">
        <dc:Bounds x="475" y="164" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_11asbfs_di" bpmnElement="Activity_11asbfs">
        <dc:Bounds x="580" y="149" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1yj96lu_di" bpmnElement="Validate_Complainant">
        <dc:Bounds x="750" y="149" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1cb1epx_di" bpmnElement="Gateway_1cb1epx" isMarkerVisible="true">
        <dc:Bounds x="895" y="164" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0fsazj8_di" bpmnElement="Validate_Complaint_Input">
        <dc:Bounds x="1010" y="149" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0768y0k_di" bpmnElement="Gateway_0768y0k" isMarkerVisible="true">
        <dc:Bounds x="1285" y="164" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1la7zrl_di" bpmnElement="Activity_1la7zrl">
        <dc:Bounds x="1590" y="149" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0tgpbnx_di" bpmnElement="Activity_0tgpbnx">
        <dc:Bounds x="1440" y="149" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_0pmmumb_di" bpmnElement="EndEvent_BF2_Registration">
        <dc:Bounds x="1742" y="171" width="36" height="36" />
      </bpmndi:BPMNShape>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
