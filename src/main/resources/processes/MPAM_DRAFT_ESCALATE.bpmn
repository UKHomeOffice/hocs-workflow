<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" id="Definitions_089rb4g" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="3.1.2">
  <bpmn:process id="MPAM_DRAFT_ESCALATE" isExecutable="true">
    <bpmn:startEvent id="StartEvent_1">
      <bpmn:outgoing>SequenceFlow_1672f4h</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:serviceTask id="ServiceTask_09dyxtm" name="User Input" camunda:expression="MPAM_DRAFT_ESCALATE_INPUT" camunda:resultVariable="screen">
      <bpmn:incoming>SequenceFlow_035cuhu</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_068y4c2</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_1672f4h</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_1oehs6h</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0etkmya</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:userTask id="UserTask_12bxh9i" name="Validate User Input">
      <bpmn:incoming>SequenceFlow_0etkmya</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_15k3u9d</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:exclusiveGateway id="ExclusiveGateway_15ohkew">
      <bpmn:incoming>SequenceFlow_15k3u9d</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_035cuhu</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_0h9s43d</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:endEvent id="EndEvent_0c1084j" name="End Stage">
      <bpmn:incoming>SequenceFlow_0dsifzx</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_0v4cleo</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:exclusiveGateway id="ExclusiveGateway_08fs8vd" name="Keep Escalated?">
      <bpmn:incoming>SequenceFlow_0h9s43d</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_068y4c2</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_1kiuv8y</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_035cuhu" name="false" sourceRef="ExclusiveGateway_15ohkew" targetRef="ServiceTask_09dyxtm">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${valid == false}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_068y4c2" sourceRef="ExclusiveGateway_08fs8vd" targetRef="ServiceTask_09dyxtm">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${DraftStatus == "Escalate"}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_0etkmya" sourceRef="ServiceTask_09dyxtm" targetRef="UserTask_12bxh9i" />
    <bpmn:sequenceFlow id="SequenceFlow_15k3u9d" sourceRef="UserTask_12bxh9i" targetRef="ExclusiveGateway_15ohkew" />
    <bpmn:sequenceFlow id="SequenceFlow_0h9s43d" sourceRef="ExclusiveGateway_15ohkew" targetRef="ExclusiveGateway_08fs8vd">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${valid == true}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_1kiuv8y" sourceRef="ExclusiveGateway_08fs8vd" targetRef="ExclusiveGateway_12jft8z">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${DraftStatus != "Escalate"}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_1672f4h" sourceRef="StartEvent_1" targetRef="ServiceTask_09dyxtm" />
    <bpmn:exclusiveGateway id="ExclusiveGateway_12jft8z" name="Close?">
      <bpmn:incoming>SequenceFlow_1kiuv8y</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0dsifzx</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_0b6461u</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_0dsifzx" sourceRef="ExclusiveGateway_12jft8z" targetRef="EndEvent_0c1084j">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${DraftStatus != "Close"}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:serviceTask id="ServiceTask_1xldhsh" name="Close case" camunda:expression="MPAM_DRAFT_ESCALATE_CLOSE" camunda:resultVariable="screen">
      <bpmn:incoming>SequenceFlow_0fr1rgt</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_0b6461u</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1t4c5dy</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:userTask id="UserTask_0csuumv" name="Validate User Input">
      <bpmn:incoming>SequenceFlow_1t4c5dy</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0aakd7e</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:exclusiveGateway id="ExclusiveGateway_1d6qes0">
      <bpmn:incoming>SequenceFlow_01g12bz</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0fr1rgt</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_0nd965z</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_0fr1rgt" name="false" sourceRef="ExclusiveGateway_1d6qes0" targetRef="ServiceTask_1xldhsh">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${valid == false}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_1t4c5dy" sourceRef="ServiceTask_1xldhsh" targetRef="UserTask_0csuumv" />
    <bpmn:sequenceFlow id="SequenceFlow_0aakd7e" sourceRef="UserTask_0csuumv" targetRef="ExclusiveGateway_1qmnu6j" />
    <bpmn:sequenceFlow id="SequenceFlow_0b6461u" sourceRef="ExclusiveGateway_12jft8z" targetRef="ServiceTask_1xldhsh">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${DraftStatus == "Close"}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:exclusiveGateway id="ExclusiveGateway_1qmnu6j" name="Direction check">
      <bpmn:incoming>SequenceFlow_0aakd7e</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_01g12bz</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_1oehs6h</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_0nd965z" sourceRef="ExclusiveGateway_1d6qes0" targetRef="ServiceTask_1kyfiv4">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${valid == true}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_01g12bz" sourceRef="ExclusiveGateway_1qmnu6j" targetRef="ExclusiveGateway_1d6qes0">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${DIRECTION == "FORWARD"}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_1oehs6h" sourceRef="ExclusiveGateway_1qmnu6j" targetRef="ServiceTask_09dyxtm">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${DIRECTION == "BACKWARD"}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:serviceTask id="ServiceTask_1kyfiv4" name="Save Draft Closure Note" camunda:expression="${bpmnService.updateAllocationNote(execution.getVariable(&#34;CaseUUID&#34;),execution.processBusinessKey, execution.getVariable(&#34;CaseNote_DraftClose&#34;), &#34;CLOSE&#34;)}">
      <bpmn:incoming>SequenceFlow_0nd965z</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0v4cleo</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="SequenceFlow_0v4cleo" sourceRef="ServiceTask_1kyfiv4" targetRef="EndEvent_0c1084j" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="MPAM_DRAFT_ESCALATE">
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1">
        <dc:Bounds x="179" y="103" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ServiceTask_09dyxtm_di" bpmnElement="ServiceTask_09dyxtm">
        <dc:Bounds x="365" y="81" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="UserTask_12bxh9i_di" bpmnElement="UserTask_12bxh9i">
        <dc:Bounds x="365" y="244" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ExclusiveGateway_15ohkew_di" bpmnElement="ExclusiveGateway_15ohkew" isMarkerVisible="true">
        <dc:Bounds x="570" y="179" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_0c1084j_di" bpmnElement="EndEvent_0c1084j">
        <dc:Bounds x="1229" y="186" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1275" y="197" width="52" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ExclusiveGateway_08fs8vd_di" bpmnElement="ExclusiveGateway_08fs8vd" isMarkerVisible="true">
        <dc:Bounds x="665" y="179" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="648" y="236" width="84" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_035cuhu_di" bpmnElement="SequenceFlow_035cuhu">
        <di:waypoint x="595" y="179" />
        <di:waypoint x="595" y="121" />
        <di:waypoint x="465" y="121" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="583" y="100" width="24" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_068y4c2_di" bpmnElement="SequenceFlow_068y4c2">
        <di:waypoint x="690" y="179" />
        <di:waypoint x="690" y="121" />
        <di:waypoint x="465" y="121" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0etkmya_di" bpmnElement="SequenceFlow_0etkmya">
        <di:waypoint x="415" y="161" />
        <di:waypoint x="415" y="244" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_15k3u9d_di" bpmnElement="SequenceFlow_15k3u9d">
        <di:waypoint x="465" y="284" />
        <di:waypoint x="595" y="284" />
        <di:waypoint x="595" y="229" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0h9s43d_di" bpmnElement="SequenceFlow_0h9s43d">
        <di:waypoint x="620" y="204" />
        <di:waypoint x="665" y="204" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1kiuv8y_di" bpmnElement="SequenceFlow_1kiuv8y">
        <di:waypoint x="715" y="204" />
        <di:waypoint x="758" y="204" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1672f4h_di" bpmnElement="SequenceFlow_1672f4h">
        <di:waypoint x="215" y="121" />
        <di:waypoint x="365" y="121" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ExclusiveGateway_12jft8z_di" bpmnElement="ExclusiveGateway_12jft8z" isMarkerVisible="true">
        <dc:Bounds x="758" y="179" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="765" y="155" width="35" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0dsifzx_di" bpmnElement="SequenceFlow_0dsifzx">
        <di:waypoint x="808" y="204" />
        <di:waypoint x="1229" y="204" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ServiceTask_1xldhsh_di" bpmnElement="ServiceTask_1xldhsh">
        <dc:Bounds x="733" y="339" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="UserTask_0csuumv_di" bpmnElement="UserTask_0csuumv">
        <dc:Bounds x="733" y="502" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ExclusiveGateway_1d6qes0_di" bpmnElement="ExclusiveGateway_1d6qes0" isMarkerVisible="true">
        <dc:Bounds x="938" y="437" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0fr1rgt_di" bpmnElement="SequenceFlow_0fr1rgt">
        <di:waypoint x="963" y="437" />
        <di:waypoint x="963" y="379" />
        <di:waypoint x="833" y="379" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="951" y="358" width="24" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1t4c5dy_di" bpmnElement="SequenceFlow_1t4c5dy">
        <di:waypoint x="783" y="419" />
        <di:waypoint x="783" y="502" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0aakd7e_di" bpmnElement="SequenceFlow_0aakd7e">
        <di:waypoint x="833" y="542" />
        <di:waypoint x="877" y="542" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0b6461u_di" bpmnElement="SequenceFlow_0b6461u">
        <di:waypoint x="783" y="229" />
        <di:waypoint x="783" y="339" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ExclusiveGateway_1qmnu6j_di" bpmnElement="ExclusiveGateway_1qmnu6j" isMarkerVisible="true">
        <dc:Bounds x="877" y="517" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="864" y="501" width="76" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0nd965z_di" bpmnElement="SequenceFlow_0nd965z">
        <di:waypoint x="988" y="462" />
        <di:waypoint x="1197" y="462" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_01g12bz_di" bpmnElement="SequenceFlow_01g12bz">
        <di:waypoint x="927" y="542" />
        <di:waypoint x="963" y="542" />
        <di:waypoint x="963" y="487" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="914" y="521" width="57" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1oehs6h_di" bpmnElement="SequenceFlow_1oehs6h">
        <di:waypoint x="902" y="567" />
        <di:waypoint x="902" y="628" />
        <di:waypoint x="283" y="628" />
        <di:waypoint x="283" y="121" />
        <di:waypoint x="365" y="121" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="909" y="584" width="64" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ServiceTask_1kyfiv4_di" bpmnElement="ServiceTask_1kyfiv4">
        <dc:Bounds x="1197" y="422" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0v4cleo_di" bpmnElement="SequenceFlow_0v4cleo">
        <di:waypoint x="1247" y="422" />
        <di:waypoint x="1247" y="222" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
