<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="Definitions_05fb2zj" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="3.1.2">
  <bpmn:process id="UKVI" isExecutable="true">
    <bpmn:startEvent id="StartEvent_1" name="Start case">
      <bpmn:outgoing>SequenceFlow_14toxc6</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:callActivity id="CallActivity_13zxdve" name="Creation" calledElement="STAGE">
      <bpmn:extensionElements>
        <camunda:in source="CreationUUID" target="StageUUID" />
        <camunda:in sourceExpression="UKVI_CREATION" target="StageWorkFlow" />
        <camunda:in businessKey="#{execution.processBusinessKey}" />
        <camunda:in variables="all" />
        <camunda:out source="StageUUID" target="CreationUUID" />
        <camunda:out source="DateReceived" target="DateReceived" />
        <camunda:in sourceExpression="UKVI_CREATION" target="StageType" />
        <camunda:in sourceExpression="ALLOCATE_TEAM" target="EmailType" />
        <camunda:in sourceExpression="${execution.processBusinessKey}" target="CaseUUID" />
        <camunda:out sourceExpression="ALLOCATE_TEAM" target="EmailType" />
        <camunda:out source="QueueTeamUUID" target="QueueTeamUUID" />
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_14toxc6</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0u2xrvf</bpmn:outgoing>
    </bpmn:callActivity>
    <bpmn:sequenceFlow id="SequenceFlow_14toxc6" sourceRef="StartEvent_1" targetRef="CallActivity_13zxdve" />
    <bpmn:callActivity id="CallActivity_1e8227w" name="Triage" calledElement="STAGE">
      <bpmn:extensionElements>
        <camunda:in source="TriageUUID" target="StageUUID" />
        <camunda:in sourceExpression="UKVI_TRIAGE" target="StageWorkFlow" />
        <camunda:in businessKey="#{execution.processBusinessKey}" />
        <camunda:in variables="all" />
        <camunda:out source="StageUUID" target="TriageUUID" />
        <camunda:out source="DateReceived" target="DateReceived" />
        <camunda:in sourceExpression="UKVI_TRIAGE" target="StageType" />
        <camunda:in sourceExpression="ALLOCATE_TEAM" target="EmailType" />
        <camunda:in sourceExpression="${execution.processBusinessKey}" target="CaseUUID" />
        <camunda:out sourceExpression="ALLOCATE_TEAM" target="EmailType" />
        <camunda:in source="QueueTeamUUID" target="AllocationTeamUUID" />
        <camunda:out source="QueueTeamUUID" target="QueueTeamUUID" />
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_0u2xrvf</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_009f2xi</bpmn:outgoing>
    </bpmn:callActivity>
    <bpmn:sequenceFlow id="SequenceFlow_0u2xrvf" sourceRef="CallActivity_13zxdve" targetRef="CallActivity_1e8227w" />
    <bpmn:callActivity id="CallActivity_15pewv4" name="Draft" calledElement="STAGE">
      <bpmn:extensionElements>
        <camunda:in source="DraftUUID" target="StageUUID" />
        <camunda:in sourceExpression="UKVI_DRAFT" target="StageWorkFlow" />
        <camunda:in businessKey="#{execution.processBusinessKey}" />
        <camunda:in variables="all" />
        <camunda:out source="StageUUID" target="DraftUUID" />
        <camunda:out source="DateReceived" target="DateReceived" />
        <camunda:in sourceExpression="UKVI_DRAFT" target="StageType" />
        <camunda:in sourceExpression="ALLOCATE_TEAM" target="EmailType" />
        <camunda:in sourceExpression="${execution.processBusinessKey}" target="CaseUUID" />
        <camunda:out sourceExpression="ALLOCATE_TEAM" target="EmailType" />
        <camunda:in source="QueueTeamUUID" target="AllocationTeamUUID" />
        <camunda:out source="QueueTeamUUID" target="QueueTeamUUID" />
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_009f2xi</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_14ecjwg</bpmn:outgoing>
    </bpmn:callActivity>
    <bpmn:sequenceFlow id="SequenceFlow_009f2xi" sourceRef="CallActivity_1e8227w" targetRef="CallActivity_15pewv4" />
    <bpmn:callActivity id="CallActivity_1rhesrm" name="QA" calledElement="STAGE">
      <bpmn:extensionElements>
        <camunda:in source="QaUUID" target="StageUUID" />
        <camunda:in sourceExpression="UKVI_QA" target="StageWorkFlow" />
        <camunda:in businessKey="#{execution.processBusinessKey}" />
        <camunda:in variables="all" />
        <camunda:out source="StageUUID" target="QaUUID" />
        <camunda:out source="DateReceived" target="DateReceived" />
        <camunda:in sourceExpression="UKVI_QA" target="StageType" />
        <camunda:in sourceExpression="ALLOCATE_TEAM" target="EmailType" />
        <camunda:in sourceExpression="${execution.processBusinessKey}" target="CaseUUID" />
        <camunda:out sourceExpression="ALLOCATE_TEAM" target="EmailType" />
        <camunda:out source="RefType" target="RefType" />
        <camunda:in source="QueueTeamUUID" target="AllocationTeamUUID" />
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_14ecjwg</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_05zoqyj</bpmn:outgoing>
    </bpmn:callActivity>
    <bpmn:sequenceFlow id="SequenceFlow_14ecjwg" sourceRef="CallActivity_15pewv4" targetRef="CallActivity_1rhesrm" />
    <bpmn:callActivity id="CallActivity_0om0308" name="Dispatch" calledElement="STAGE">
      <bpmn:extensionElements>
        <camunda:in source="DispatchUUID" target="StageUUID" />
        <camunda:in sourceExpression="UKVI_DISPATCH" target="StageWorkFlow" />
        <camunda:in businessKey="#{execution.processBusinessKey}" />
        <camunda:in variables="all" />
        <camunda:out source="StageUUID" target="DispatchUUID" />
        <camunda:out source="DateReceived" target="DateReceived" />
        <camunda:in sourceExpression="UKVI_DISPATCH" target="StageType" />
        <camunda:in sourceExpression="ALLOCATE_TEAM" target="EmailType" />
        <camunda:in sourceExpression="${execution.processBusinessKey}" target="CaseUUID" />
        <camunda:out sourceExpression="ALLOCATE_TEAM" target="EmailType" />
        <camunda:in source="QueueTeamUUID" target="AllocationTeamUUID" />
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_1pemtrq</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0i4wmw7</bpmn:outgoing>
    </bpmn:callActivity>
    <bpmn:exclusiveGateway id="ExclusiveGateway_1n7066i" name="RefType?">
      <bpmn:incoming>SequenceFlow_05zoqyj</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1pemtrq</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_1hnwm4d</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_05zoqyj" sourceRef="CallActivity_1rhesrm" targetRef="ExclusiveGateway_1n7066i" />
    <bpmn:sequenceFlow id="SequenceFlow_1pemtrq" name="B:Ref" sourceRef="ExclusiveGateway_1n7066i" targetRef="CallActivity_0om0308">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${RefType == "B-Ref"}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:callActivity id="CallActivity_0wfokmb" name="Private Office" calledElement="STAGE">
      <bpmn:extensionElements>
        <camunda:in source="PoUUID" target="StageUUID" />
        <camunda:in sourceExpression="UKVI_PO" target="StageWorkFlow" />
        <camunda:in businessKey="#{execution.processBusinessKey}" />
        <camunda:in variables="all" />
        <camunda:out source="StageUUID" target="PoUUID" />
        <camunda:out source="DateReceived" target="DateReceived" />
        <camunda:in sourceExpression="UKVI_PO" target="StageType" />
        <camunda:in sourceExpression="ALLOCATE_TEAM" target="EmailType" />
        <camunda:in sourceExpression="${execution.processBusinessKey}" target="CaseUUID" />
        <camunda:out sourceExpression="ALLOCATE_TEAM" target="EmailType" />
        <camunda:in source="QueueTeamUUID" target="AllocationTeamUUID" />
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_1hnwm4d</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1d7lzq0</bpmn:outgoing>
    </bpmn:callActivity>
    <bpmn:sequenceFlow id="SequenceFlow_1hnwm4d" name="M:Ref" sourceRef="ExclusiveGateway_1n7066i" targetRef="CallActivity_0wfokmb">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${RefType == "M-Ref"}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:endEvent id="EndEvent_1y6sl7d" name="End Case">
      <bpmn:incoming>SequenceFlow_0d2t738</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="SequenceFlow_1d7lzq0" sourceRef="CallActivity_0wfokmb" targetRef="ServiceTask_0rwk9ie" />
    <bpmn:serviceTask id="ServiceTask_0rwk9ie" name="Complete Case" camunda:expression="${bpmnService.completeCase(execution.processBusinessKey)}">
      <bpmn:incoming>SequenceFlow_1d7lzq0</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_0i4wmw7</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0d2t738</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="SequenceFlow_0d2t738" sourceRef="ServiceTask_0rwk9ie" targetRef="EndEvent_1y6sl7d" />
    <bpmn:sequenceFlow id="SequenceFlow_0i4wmw7" sourceRef="CallActivity_0om0308" targetRef="ServiceTask_0rwk9ie" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="UKVI">
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1">
        <dc:Bounds x="179" y="310" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="172" y="353" width="50" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="CallActivity_13zxdve_di" bpmnElement="CallActivity_13zxdve">
        <dc:Bounds x="308" y="288" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_14toxc6_di" bpmnElement="SequenceFlow_14toxc6">
        <di:waypoint x="215" y="328" />
        <di:waypoint x="308" y="328" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="CallActivity_1e8227w_di" bpmnElement="CallActivity_1e8227w">
        <dc:Bounds x="517" y="288" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0u2xrvf_di" bpmnElement="SequenceFlow_0u2xrvf">
        <di:waypoint x="408" y="328" />
        <di:waypoint x="517" y="328" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="CallActivity_15pewv4_di" bpmnElement="CallActivity_15pewv4">
        <dc:Bounds x="736" y="288" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_009f2xi_di" bpmnElement="SequenceFlow_009f2xi">
        <di:waypoint x="617" y="328" />
        <di:waypoint x="736" y="328" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="CallActivity_1rhesrm_di" bpmnElement="CallActivity_1rhesrm">
        <dc:Bounds x="956" y="288" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_14ecjwg_di" bpmnElement="SequenceFlow_14ecjwg">
        <di:waypoint x="836" y="328" />
        <di:waypoint x="956" y="328" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="CallActivity_0om0308_di" bpmnElement="CallActivity_0om0308">
        <dc:Bounds x="1355" y="81" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ExclusiveGateway_1n7066i_di" bpmnElement="ExclusiveGateway_1n7066i" isMarkerVisible="true">
        <dc:Bounds x="1163" y="303" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1226" y="321" width="48" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_05zoqyj_di" bpmnElement="SequenceFlow_05zoqyj">
        <di:waypoint x="1056" y="328" />
        <di:waypoint x="1163" y="328" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1pemtrq_di" bpmnElement="SequenceFlow_1pemtrq">
        <di:waypoint x="1188" y="303" />
        <di:waypoint x="1188" y="121" />
        <di:waypoint x="1355" y="121" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1192" y="218" width="28" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="CallActivity_0wfokmb_di" bpmnElement="CallActivity_0wfokmb">
        <dc:Bounds x="1355" y="480" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1hnwm4d_di" bpmnElement="SequenceFlow_1hnwm4d">
        <di:waypoint x="1188" y="353" />
        <di:waypoint x="1188" y="520" />
        <di:waypoint x="1355" y="520" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1193" y="415" width="30" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="EndEvent_1y6sl7d_di" bpmnElement="EndEvent_1y6sl7d">
        <dc:Bounds x="1750" y="310" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1795" y="321" width="49" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1d7lzq0_di" bpmnElement="SequenceFlow_1d7lzq0">
        <di:waypoint x="1455" y="520" />
        <di:waypoint x="1605" y="520" />
        <di:waypoint x="1605" y="368" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ServiceTask_0rwk9ie_di" bpmnElement="ServiceTask_0rwk9ie">
        <dc:Bounds x="1555" y="288" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0d2t738_di" bpmnElement="SequenceFlow_0d2t738">
        <di:waypoint x="1655" y="328" />
        <di:waypoint x="1750" y="328" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0i4wmw7_di" bpmnElement="SequenceFlow_0i4wmw7">
        <di:waypoint x="1455" y="121" />
        <di:waypoint x="1605" y="121" />
        <di:waypoint x="1605" y="288" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
